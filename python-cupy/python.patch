*** cupy/cupy_backends/cuda/libs/cusparselt.pyx-dist	2022-06-06 22:13:35.118163775 +0900
--- cupy/cupy_backends/cuda/libs/cusparselt.pyx	2022-06-06 22:31:28.290615626 +0900
***************
*** 98,104 ****
          const void* data, size_t ataSize)
      cusparseStatus_t cusparseLtMatmulGetWorkspace(
          const cusparseLtHandle_t* handle,
!         const cusparseLtMatmulAlgSelection_t* algSelection,
          size_t* workspaceSize)
      cusparseStatus_t cusparseLtMatmulPlanInit(
          const cusparseLtHandle_t* handle,
--- 98,104 ----
          const void* data, size_t ataSize)
      cusparseStatus_t cusparseLtMatmulGetWorkspace(
          const cusparseLtHandle_t* handle,
!         const cusparseLtMatmulPlan_t* plan,
          size_t* workspaceSize)
      cusparseStatus_t cusparseLtMatmulPlanInit(
          const cusparseLtHandle_t* handle,
***************
*** 371,382 ****
      check_status(status)
  
  cpdef size_t matmulGetWorkspace(Handle handle,
!                                 MatmulAlgSelection algSelection):
      """Determines the required workspace size"""
      cdef size_t workspaceSize
      status = cusparseLtMatmulGetWorkspace(
          <const cusparseLtHandle_t*> handle._ptr,
!         <const cusparseLtMatmulAlgSelection_t*> algSelection._ptr,
          &workspaceSize)
      check_status(status)
      return workspaceSize
--- 371,382 ----
      check_status(status)
  
  cpdef size_t matmulGetWorkspace(Handle handle,
!                                 MatmulPlan plan):
      """Determines the required workspace size"""
      cdef size_t workspaceSize
      status = cusparseLtMatmulGetWorkspace(
          <const cusparseLtHandle_t*> handle._ptr,
!         <const cusparseLtMatmulPlan_t*> plan._ptr,
          &workspaceSize)
      check_status(status)
      return workspaceSize
*** cupy/examples/cusparselt/matmul.py-dist	2022-06-06 23:11:08.307538184 +0900
--- cupy/examples/cusparselt/matmul.py	2022-06-06 23:13:14.173093927 +0900
***************
*** 56,62 ****
  cusparselt.matmulAlgSetAttribute(handle, alg_sel,
                                   cusparselt.CUSPARSELT_MATMUL_ALG_CONFIG_ID,
                                   alg.ctypes.data, 4)
! workspace_size = cusparselt.matmulGetWorkspace(handle, alg_sel)
  workspace = cupy.empty(workspace_size, dtype='int8')
  cusparselt.matmulPlanInit(handle, plan, matmul, alg_sel, workspace_size)
  
--- 56,62 ----
  cusparselt.matmulAlgSetAttribute(handle, alg_sel,
                                   cusparselt.CUSPARSELT_MATMUL_ALG_CONFIG_ID,
                                   alg.ctypes.data, 4)
! workspace_size = cusparselt.matmulGetWorkspace(handle, plan)
  workspace = cupy.empty(workspace_size, dtype='int8')
  cusparselt.matmulPlanInit(handle, plan, matmul, alg_sel, workspace_size)
  
*** cupy/cupy_backends/cuda/libs/cusparselt.pxd-dist	2022-06-28 17:49:01.098110960 +0900
--- cupy/cupy_backends/cuda/libs/cusparselt.pxd	2022-06-28 17:55:35.049725677 +0900
***************
*** 23,30 ****
      CUSPARSELT_MATMUL_ACTIVATION_RELU_UPPERBOUND = 1  # READ/WRITE
      CUSPARSELT_MATMUL_ACTIVATION_RELU_THRESHOLD = 2   # READ/WRITE
      CUSPARSELT_MATMUL_ACTIVATION_GELU = 3             # READ/WRITE
!     CUSPARSELT_MATMUL_BIAS_STRIDE = 4                 # READ/WRITE
!     CUSPARSELT_MATMUL_BIAS_POINTER = 5                # READ/WRITE
  
      # cusparseLtMatmulAlg_t
      CUSPARSELT_MATMUL_ALG_DEFAULT = 0
--- 23,33 ----
      CUSPARSELT_MATMUL_ACTIVATION_RELU_UPPERBOUND = 1  # READ/WRITE
      CUSPARSELT_MATMUL_ACTIVATION_RELU_THRESHOLD = 2   # READ/WRITE
      CUSPARSELT_MATMUL_ACTIVATION_GELU = 3             # READ/WRITE
!     CUSPARSELT_MATMUL_ACTIVATION_GELU_SCALING = 4     # READ/WRITE
!     CUSPARSELT_MATMUL_ALPHA_VECTOR_SCALING = 5        # READ/WRITE
!     CUSPARSELT_MATMUL_BETA_VECTOR_SCALING = 6         # READ/WRITE
!     CUSPARSELT_MATMUL_BIAS_STRIDE = 7                 # READ/WRITE
!     CUSPARSELT_MATMUL_BIAS_POINTER = 8                # READ/WRITE
  
      # cusparseLtMatmulAlg_t
      CUSPARSELT_MATMUL_ALG_DEFAULT = 0
***************
*** 33,38 ****
--- 36,49 ----
      CUSPARSELT_MATMUL_ALG_CONFIG_ID = 0      # NOQA, READ/WRITE
      CUSPARSELT_MATMUL_ALG_CONFIG_MAX_ID = 1  # NOQA, READ-ONLY
      CUSPARSELT_MATMUL_SEARCH_ITERATIONS = 2  # NOQA, READ/WRITE
+     CUSPARSELT_MATMUL_SPLIT_K = 3            # NOQA, READ/WRITE
+     CUSPARSELT_MATMUL_SPLIT_K_MODE =4        # NOQA, READ/WRITE
+     CUSPARSELT_MATMUL_SPLIT_K_BUFFERS=5      # NOQA, READ/WRITE
+     
+     # cusparseLtSplitKMode_t
+     CUSPARSELT_INVALID_MODE             = 0
+     CUSPARSELT_SPLIT_K_MODE_ONE_KERNEL  = 1
+     CUSPARSELT_SPLIT_K_MODE_TWO_KERNELS = 2
  
      # cusparseLtPruneAlg_t
      CUSPARSELT_PRUNE_SPMMA_TILE = 0
